/* Collapsing vertical tabs that expand on hover */

:root {
    --lessTransparent: rgba(0,0,0,0.4); /* fallback */
    --customRadius: 8px; /* NOT USING NOW */

    /* New adaptive overlay system */
    --overlayDark: rgba(0, 0, 0, 0.4);
    --overlayLight: rgba(255, 255, 255, 0.4);
}

.tabbar-wrapper .tabbar-wrapper,
#tabs-container.left,
#tabs-subcontainer.left,
#tabs-container.right,
#tabs-subcontainer.right,
.button-toolbar.workspace-popup.tabbar-workspace-button {
    min-width: 40px;
    transition: min-width 200ms ease-in-out !important; /* Smooth expand/collapse */
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    border-radius: var(--radius);
}

.tabbar-wrapper .tabbar-wrapper:hover,
#tabs-container.left:hover,
#tabs-subcontainer.left:hover,
#tabs-container.right:hover,
#tabs-subcontainer.right:hover,
.button-toolbar.workspace-popup.tabbar-workspace-button:hover {
    min-width: 180px !important;
    transition: min-width 200ms ease-in-out !important;
    transition-delay: 150ms !important; /* Slight delay for better feel */
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    border-radius: var(--radius);
}

.button-toolbar.workspace-popup.tabbar-workspace-button:hover:has(+ #tabs-tabbar-container > #tabs-subcontainer) {
    min-width: 180px !important;
    transition: min-width 200ms ease-in-out !important;
    transition-delay: 150ms !important;
}

.tabbar-wrapper .tabbar-wrapper:hover:has(#tabs-tabbar-container > #tabs-subcontainer) {
    width: 180px !important;
    transition: min-width 200ms ease-in-out !important;
    transition-delay: 300ms !important; /* Smoother timing */
}

.button-toolbar.workspace-popup.tabbar-workspace-button > button {
    justify-content: left !important;
}

#browser:not(.alt-tabs) .tab-position .tab:hover.tab-small:not(.tab-mini).active .title,
#browser:not(.alt-tabs) .tab-position .tab.force-hover.tab-small:not(.tab-mini).active .title {
    display: flex !important;
}

.tabbar-workspace-button {
    width: 100% !important;
}

#tabs-tabbar-container.left,
#tabs-tabbar-container.right {
    width: auto !important;
    min-width: 32px;
}

.toolbar-tabbar.sync-and-trash-container {
    flex-direction: column;
}

/* tabs list gets the scrollable middle */
#tabs-tabbar-container:is(.left, .right) #tabs-subcontainer {
    display: flex;
    flex-direction: column;
}

#tabs-tabbar-container:is(.left, .right) #tabs-subcontainer .tabbar-wrapper {
    flex: 1 1 auto;
    min-height: 0;
    overflow: auto;
}

/* leftside 1st button */
.toolbar-mainbar > div:first-child > .page-zoom-controls:is(:hover, :focus-within) > input[type=range] {
    transform: translate(3px, 29px);
}

.toolbar-mainbar > div:first-child > .page-zoom-controls:has(input[type=range]) .button-toolbar:has(button[title="Reset Zoom"]) {
    transform: translate(24px, 18.5px);
}

/* rightside button */
.toolbar-mainbar > div:nth-last-child(4) > .page-zoom-controls:is(:hover, :focus-within) > input[type=range] {
    transform: translate(-10px, 29px);
}

.toolbar-mainbar > div:nth-last-child(3) > .page-zoom-controls:is(:hover, :focus-within) > input[type=range] {
    transform: translate(-44px, 29px);
}

.toolbar-mainbar > div:nth-last-child(3) > .page-zoom-controls input[type=range]::after {
    left: 40%;
}

.toolbar-mainbar > div:nth-last-child(3) > .page-zoom-controls:has(input[type=range]) .button-toolbar:has(button[title="Reset Zoom"]) {
    transform: translate(-24px, 18.5px);
}

.toolbar-mainbar > div:nth-last-child(2) > .page-zoom-controls:is(:hover, :focus-within) > input[type=range] {
    transform: translate(-78px, 29px);
}

.toolbar-mainbar > div:nth-last-child(2) > .page-zoom-controls input[type=range]::after {
    left: 64%;
}

.toolbar-mainbar > div:nth-last-child(2) > .page-zoom-controls:has(input[type=range]) .button-toolbar:has(button[title="Reset Zoom"]) {
    transform: translate(-58px, 18.5px);
}

.toolbar-mainbar > div:last-child > .page-zoom-controls:is(:hover, :focus-within) > input[type=range] {
    transform: translate(-112px, 29px);
}

.toolbar-mainbar > div:last-child > .page-zoom-controls input[type=range]::after {
    left: 88%;
}

.toolbar-mainbar > div:last-child > .page-zoom-controls:has(input[type=range]) .button-toolbar:has(button[title="Reset Zoom"]) {
    transform: translate(-92px, 18.5px);
}

/** Make the expanded tabbar float on the webpage. Use with tab-expansion mod. **/
#main > .inner > div:has(#tabs-tabbar-container:is(.left, .right)) {
    position: absolute;
    z-index: 2;
    opacity: 1;
    background-color: var(--colorBg);
    height: 100% !important;
}

#browser.transparent-tabbar .inner > div:has(#tabs-tabbar-container:is(.left, .right)) {
    background-color: var(--colorImageFgHeaviest);
}

.inner #webpage-stack {
    margin-left: 40px;
}

.inner:has(#tabs-subcontainer:is(.left, .right)) #webpage-stack {
    margin-left: 80px;
}

.fullscreen #webpage-stack {
    margin-left: 0px;
}

.theme-dark .tab-position .tab.active .tab-header .favicon {
    filter: none !important;
}

/* Fixing favicon */
.tab-header {
    padding-left: 7.4px !important;
}

/* Show audio/speaker icon only on tab hover */
span.tab-audio {
    opacity: 0;
    transition: opacity 0.25s ease-in-out;
}

#tabs-tabbar-container:hover span.tab-audio,
#tabs-subcontainer:hover span.tab-audio {
    opacity: 1;
}

/* Smooth slide + slight fade for tabbar */
#tabs-tabbar-container.left,
#tabs-tabbar-container.right {
    opacity: 0.95;
    transition: opacity 200ms ease-in-out, min-width 200ms ease-in-out !important;
}

#tabs-tabbar-container.left:hover,
#tabs-tabbar-container.right:hover {
    opacity: 1;
}

/* Collapse state force reset for workspace (smooth) */
#tabs-tabbar-container.left:not(:hover),
#tabs-tabbar-container.right:not(:hover),
#tabs-subcontainer.left:not(:hover),
#tabs-subcontainer.right:not(:hover) {
    min-width: 40px !important;
    width: 40px !important;
    transition: min-width 200ms ease-in-out !important;
}

/* Workspace button in collapsed state: icon only */
.button-toolbar.workspace-popup.tabbar-workspace-button {
    min-width: 35px !important;
    max-width: 55px !important;
    overflow: hidden !important;
}

/* adjust this to move more/less (positive = more to the right for left panel) */
:root { --workspace-offset: 0px; }

/* collapsed — left panel: move button to the right */
#tabs-tabbar-container.left:not(:hover) .button-toolbar.workspace-popup.tabbar-workspace-button,
#tabs-subcontainer.left:not(:hover) .button-toolbar.workspace-popup.tabbar-workspace-button {
    transform: translateX(var(--workspace-offset)) !important;
    transition: transform 180ms ease-in-out !important;
}

/* collapsed — right panel: move button inward (use negative) */
#tabs-tabbar-container.right:not(:hover) .button-toolbar.workspace-popup.tabbar-workspace-button,
#tabs-subcontainer.right:not(:hover) .button-toolbar.workspace-popup.tabbar-workspace-button {
    transform: translateX(calc(-1 * var(--workspace-offset))) !important;
    transition: transform 180ms ease-in-out !important;
}

/* when expanded/hovered, reset transform */
#tabs-tabbar-container.left:hover .button-toolbar.workspace-popup.tabbar-workspace-button,
#tabs-tabbar-container.right:hover .button-toolbar.workspace-popup.tabbar-workspace-button,
#tabs-subcontainer.left:hover .button-toolbar.workspace-popup.tabbar-workspace-button,
#tabs-subcontainer.right:hover .button-toolbar.workspace-popup.tabbar-workspace-button {
    transform: none !important;
}

/* ==== Dynamic Effects for Vivaldi (Neon Theme) ==== */

/* Smooth transitions for all tabs */
.tab {
    transition:
        background 0.4s ease,
        transform 0.2s ease,
        box-shadow 0.4s ease;
}

/* Glow & scale on hover (inactive tabs only) */
.tab:not(.active):hover {
    background-color: rgba(0, 255, 200, 0.08) !important;
    transform: scale(1.04);
    box-shadow: 0 0 12px rgba(0, 255, 200, 0.9);
}

/* Active tab with animated neon gradient */
@keyframes activeTabGradient {
    0% { background-position: 0% 50%; }
    100% { background-position: 100% 50%; }
}

.tab.active {
    background: linear-gradient(270deg, #00fff7, #ff00f7);
    background-size: 200% 200%;
    animation: activeTabGradient 3s linear infinite;
    color: white !important;
    text-shadow: 0 0 6px #00fff7, 0 0 10px #ff00f7;
    box-shadow: 0 0 15px rgba(255, 0, 247, 0.9), 0 0 25px rgba(0, 255, 247, 0.7);
}

/* Click bounce effect */
.tab:active {
    transform: scale(0.95);
    transition: transform 0.1s ease;
}

/* Slight lift when hovering over buttons */
.button-toolbar:hover {
    transform: translateY(-1px);
    transition: transform 0.2s ease;
}

/* Neon glow on button hover */
.button-toolbar:hover .button-icon {
    filter: drop-shadow(0 0 6px #00fff7) drop-shadow(0 0 10px #ff00f7);
}

/* TODO
Suggestions?
*/

/* set theme-aware overlay */
.theme-dark {
    --overlayColor: var(--overlayDark);
}
.theme-light {
    --overlayColor: var(--overlayLight);
}

/* MAINBAR */

#browser.win.address-top .toolbar-mainbar:has(.window-buttongroup.on-mainbar),
#browser.linux.address-top .toolbar-mainbar:has(.window-buttongroup.on-mainbar) {
    min-height: calc(40px / var(--uiZoomLevel));
}

.density-on .UrlBar-SearchField,
.density-on .UrlBar-AddressField {
    height: 30px;
}

.disable-titlebar#browser.win .window-buttongroup {
    height: 40px;
}


#browser.win .window-buttongroup button.window-close {
    border-top-right-radius: var(--radius);
    border-bottom-right-radius: var(--radius);
}

.mainbar {
    background-color: var(--overlayColor);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    margin: 4px;
    border-radius: var(--radius);
}

.SearchField,
.UrlBar-AddressField {
    border: none !important;
    background-color: transparent;
}

.SearchField:hover,
.UrlBar-AddressField:hover,
.color-behind-tabs-on .SearchField:focus-within,
.color-behind-tabs-on .MailSearchField-Inner:focus-within,
.color-behind-tabs-on .UrlBar-AddressField:focus-within {
    background-color: var(--overlayColor);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
}

.UrlFragment-Wrapper--ShouldHighlight {
    --HighlightColor: var(--colorFg);
    --LowlightColor: var(--colorFg);
}

.address-top .mainbar { border-bottom: none; }

.mainbar button:hover,
#browser:not(.tabs-top) .vivaldi:hover,
#browser:not(.tabs-top) .vivaldi:focus-visible,
.theme-dark#browser.win .window-buttongroup button:hover {
    background-color: var(--overlayColor);
    backdrop-filter: blur(6px);
}

.disable-titlebar.address-top#browser:not(.tabs-top) .vivaldi {
    margin: 0 5px;
}

/* SIDEBAR */

#switch { padding-top: 5px; }

div#main.right #panels-container {
    padding-bottom: 5px;
}

.density-on #switch {
    background-color: var(--overlayColor);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border-radius: var(--radius);
    padding-bottom: 4px;
    padding-right: 4px;
    padding-left: 0px;
}

#panels-container { background-color: transparent; margin-right: 4px; }

#panels .webpanel-stack .webpanel .webpanel-content {
    margin-right: 7px;
    border-bottom-right-radius: var(--radius);
    border-top-right-radius: var(--radius);
}

#panels-container.right:not(.icons) .panel-group,
#panels-container.right.icons:not(:has(.SlideBar)) { border-left: none; }

#panels-container.overlay .panel-group,
.ExtensionToggleIcon.ExtensionToggleIcon--Expanded,
.ExtensionIcon--Hidden { background-color: transparent; }

#panels-container button:hover,
.ExtensionIcon--Hidden:hover,
.ExtensionIcon--Hidden:active,
.toolbar-panel > .button-toolbar > button.button-pressed,
.toolbar-panel .toolbar-extensions .button-toolbar > button.button-pressed,
.toolbar-panel .page-zoom-controls .button-toolbar > button.button-pressed,
.density-on #switch .addwebpanel-wrapper > button.active button,
.density-on #switch > .button-toolbar.active button,
.density-on #switch > * > .button-toolbar.active button,
.density-on #switch > button.active button {
    background-color: var(--overlayColor);
    backdrop-filter: blur(6px);
}

/* INNER ROUND BORDERS */

#browser:not(.fullscreen) #webpage-stack {
    border-radius: var(--radius);
    margin: 0 1px 4px 50px;
}

/* SPEED DIAL */
.SpeedDial--Thumbnail {
    background-color: var(--overlayColor);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    box-shadow: none;
}

/* CTRL+F */
.find-in-page-wrapper {
    background-color: var(--overlayColor);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
}

/* BOOKMARK BAR */
.bookmark-bar {
    background-color: var(--overlayColor) !important;
    backdrop-filter: blur(12px) !important;
    -webkit-backdrop-filter: blur(12px) !important;
    border-radius: var(--radius);
    margin: 4px;
    padding: 4px 8px;
    min-height: 30px !important;
    display: flex !important;
    align-items: center !important;
}

.bookmark-bar .observer { background: transparent !important; }

.bookmark-bar button,
.bookmark-bar .button-toolbar > button,
.bookmark-bar .bookmark-item,
.bookmark-bar .bookmarkbar-item,
.bookmark-bar .toolbar > .button-toolbar > button {
    background-color: transparent !important;
    color: var(--colorFg) !important;
    border: none !important;
    border-radius: var(--radius);
    height: 30px !important;
    line-height: 30px !important;
    padding: 0 8px !important;
    display: inline-flex !important;
    align-items: center !important;
    transition: background-color 0.2s ease, backdrop-filter 0.2s ease, color 0.2s ease;
}

.bookmark-bar .button-title,
.bookmark-bar .title,
.bookmark-bar .bookmark-label { color: var(--colorFg) !important; }

.bookmark-bar button:hover,
.bookmark-bar .button-toolbar > button:hover,
.bookmark-bar .bookmark-item:hover,
.bookmark-bar .bookmarkbar-item:hover {
    background-color: var(--overlayColor) !important;
    backdrop-filter: blur(calc(var(--blurStrength) * 0.5));
    -webkit-backdrop-filter: blur(calc(var(--blurStrength) * 0.5));
}

.bookmark-bar button:active,
.bookmark-bar .button-toolbar > button:active,
.bookmark-bar .bookmark-item:active,
.bookmark-bar .bookmarkbar-item:active,
.bookmark-bar .button-toolbar > button[aria-pressed="true"] {
    background-color: var(--overlayColor) !important;
    backdrop-filter: blur(calc(var(--blurStrength) * 0.7));
    -webkit-backdrop-filter: blur(calc(var(--blurStrength) * 0.7));
}

.bookmark-bar .separator {
    opacity: 0.5;
    border-right: 1px solid color-mix(in srgb, var(--colorFg), transparent 60%) !important;
}

/* ========================================================= */
/* SPEED DIAL SEARCH BAR (blurred idle + consistent roundness) */
/* ========================================================= */

/* Idle blurred */
.startpage .SearchField:not(:hover):not(:focus-within),
.StartPage .SearchField:not(:hover):not(:focus-within),
.SpeedDial .SearchField:not(:hover):not(:focus-within),
.SpeedDialView .SearchField:not(:hover):not(:focus-within) {
    background-color: var(--overlayColor) !important;
    backdrop-filter: blur(6px) !important;
    -webkit-backdrop-filter: blur(6px) !important;
    border-radius: var(--radius) !important;
    box-shadow: none !important;
    transition: background-color 0.18s ease, backdrop-filter 0.18s ease;
}

/* Stronger blur when hovered/focused */
.startpage .SearchField:hover,
.startpage .SearchField:focus-within,
.StartPage .SearchField:hover,
.StartPage .SearchField:focus-within,
.SpeedDial .SearchField:hover,
.SpeedDial .SearchField:focus-within,
.SpeedDialView .SearchField:hover,
.SpeedDialView .SearchField:focus-within {
    background-color: var(--overlayColor) !important;
    backdrop-filter: blur(12px) !important;
    -webkit-backdrop-filter: blur(12px) !important;
    border-radius: var(--radius) !important; /* keep corners consistent */
}

/* Inner input transparency */
.startpage .SearchField input,
.StartPage .SearchField input,
.SpeedDial .SearchField input,
.SpeedDialView .SearchField input {
    background: transparent !important;
    color: inherit !important;
    border-radius: var(--radius) !important;
}

.mainbar,
.bookmark-bar {
    z-index: 10; /* keep reasonable */
}

/* == Startpage Navigation Mod integrated with Vivaldi theme - Adjusted Padding == */

/* Config variables for Startpage Navigation Mod */
:root {
    --startpageNavBtnPrimary: var(--colorFg);
    --startpageNavBtnSecondary: var(--colorHighlightBg);
    --startpageNavBtnInactive: var(--overlayColor);
    --startpageNavBtnRounding: 14px;
    --startpageNavBtnHeight: 23px;
    --startpageNavBtnMargin: 10px;
    --startpageNavBackground: var(--overlayColor);
    --startpageNavPaddingOnTop: 10px;      /* decreased padding */
    --startpageNavPaddingOnBottom: 10px;   /* decreased padding */
    --startpageNavTextShadow: none;
    --startpageNavIconShadow: drop-shadow(0 0 2px var(--startpageNavBtnSecondary));
}

/* Startpage Nav Bar background and spacing */
.startpage .startpage-navigation {
    background-color: var(--startpageNavBackground);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    padding-top: var(--startpageNavPaddingOnTop);
    padding-bottom: calc(var(--startpageNavPaddingOnBottom) - 2px);
    min-height: unset;
    box-shadow: none;
}

/* Remove background from folder nav buttons */
.startpage .startpage-folder-navigation button {
    background-color: var(--startpageNavBtnInactive);
}

/* Format buttons for Startpage Nav Bar */
.startpage .startpage-navigation .button-startpage,
.startpage .startpage-folder-navigation .button-startpage {
    display: flex;
    align-items: center;
    justify-content: center;
    height: var(--startpageNavBtnHeight);
    min-height: unset;
    border-radius: var(--startpageNavBtnRounding) !important;
    border: 1.2px solid var(--startpageNavBtnPrimary);
    background-color: var(--startpageNavBtnInactive);
    color: var(--startpageNavBtnPrimary);
    margin: 0 var(--startpageNavBtnMargin) !important;
    text-shadow: var(--startpageNavTextShadow);
    box-shadow: 0 0 2px 1px rgba(0, 0, 0, 0.2);
    transition: 0.1s;
    font-size: 11px;
    font-weight: 500;
    -webkit-mask-image: unset;
}

/* Hover or active state for buttons */
.startpage .startpage-navigation .button-startpage.active,
.startpage .startpage-navigation .button-startpage:hover,
.startpage .startpage-folder-navigation .button-startpage:hover {
    color: var(--startpageNavBtnSecondary);
    background-color: var(--overlayColor);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    text-shadow: none;
}

/* Format icons for Startpage Nav Bar buttons */
.startpage .startpage-navigation .button-startpage svg,
.startpage .startpage-folder-navigation .button-startpage svg {
    color: var(--startpageNavBtnPrimary);
    filter: var(--startpageNavIconShadow);
    height: 2.1em;
    width: auto;
}

.startpage .startpage-navigation .button-startpage.add-set svg {
    margin: 0;
    height: 16px; /* fix alignment */
}

/* Hover/active icons */
.startpage .startpage-navigation .button-startpage.active svg,
.startpage .startpage-navigation .button-startpage:hover svg,
.startpage .startpage-folder-navigation .button-startpage:hover svg {
    color: var(--startpageNavBtnSecondary);
    filter: unset;
}

/* Speed dial folder back button fixes */
button.button-startpage.up-level svg {
    position: unset;
    margin: 0 4px;
}

button.button-startpage.up-level span {
    display: flex;
}

.button-startpage.up-level {
    padding: 0 14px 0 6px;
}

/* Center the speed dial folder back button */
.startpage .startpage-folder-navigation {
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Remove border between navigation groups */
.startpage .startpage-navigation .startpage-navigation-group:last-of-type {
    border: unset;
}

/* Remove color gradient after buttons */
button.button-startpage:after {
    content: unset;
}

/* Make new speed dial folder add button smaller */
.startpage .startpage-navigation .button-startpage.add-set {
    padding-left: 1px;
    padding-right: 1px;
    min-width: 27px;
}

/* Fill the new speed dial add button icon correctly */
button.button-startpage.add-set svg path {
    fill: var(--startpageNavBtnPrimary);
}

button.button-startpage.add-set:hover svg path {
    fill: var(--startpageNavBtnSecondary);
}

/* Remove gap from top of speed dial items */
.speeddial {
    margin-top: 0;
    padding-top: 2px;
}

/* Fix search-enabled spacing */
.sdwrapper .iconmenu-container.searchfield {
    margin: 0px auto 25px;
}

/* Adjust notes navigation icon size */
.startpage .startpage-navigation .button-startpage[data-id="notes"] svg {
    transform: scale(1.45);
}

/* TABS */

#browser .tabbar-wrapper,
#browser.tabs-top #header {
    background-color: var(--overlayColor); /* BG COLOR OF TAB BAR PART 1 */
    margin-left: 2px;
    border-radius: var(--radius);
    margin-bottom: 4px;
}


#browser:not(.transparent-tabbar) #tabs-tabbar-container {
    background-color: color-mix(in srgb, var(--colorBg), var(--lessTransparent)); /* BG COLOR OF TAB BAR PART 2 */
    margin-left: 0px;
    border-radius: var(--radius);
}

#browser:not(.transparent-tabbar) .tabbar-wrapper {
    background-color: color-mix(in srgb, var(--colorBg), var(--lessTransparent)); /* BG COLOR OF TAB BAR PART 2 */
    margin-left: 2px;
    border-radius: var(--radius);
    margin-bottom: 4px;
}

.tabs-left .tabbar-wrapper { /* BG COLOR OF TAB BAR PART 3 */
    margin-bottom: 4px;
}

.color-behind-tabs-on .tab {
    color: var(--colorFg); /* FONT COLOR OF NON ACTIVE TAB */
}

.density-on .tab.active:not(.tab-in-accordion, .tab-accordion) {
    box-shadow: none; /* REMOVE SHADOW UNDER ACTIVE TAB */
}

.separator hr { /* ADJUSTING SEPARATOR UNDER PINNED TABS */
    border: 1px solid color-mix(in srgb, var(--colorBg), var(--lessTransparent));
    background: color-mix(in srgb, var(--colorBg), var(--lessTransparent));
    opacity: 0.5;
    width: 100%;
    margin-top: 6px;
}

@media not (prefers-contrast: more) { /* HIDE TAB SCROLLBAR */
    ::-webkit-scrollbar {
        display: none;
    }
}

#tabs-container.left:has(.tab-strip.overflow),
#tabs-container.right:has(.tab-strip.overflow) {
    padding-right: 3px; /* FIXING SPACE NEXT TO TAB WHEN MANY TABS */
}

#tabs-tabbar-container {
    padding: 0px 2px 0px 2px;  /* ADDING SPACE NEXT TO TABS */
}

#browser.color-behind-tabs-on .tab.active.active { /* BG OF ACTIVE TAB */
    background-color: var(--colorBg);
}

#tabs-container .tab:not(.tab-group,.tab.active):hover { /* HOVER OF TABS */
    background-color: var(--colorBg);
}

#browser:not(.theme-dark) #tabs-tabbar-container.left { /* HIDE WEIRD BORDER BETWEEN TAB SECTION AND WEB PAGE */
    box-shadow: none;
}

.tab.active .favicon {
    filter: none !important; /* HIDE FAVICON WHITE BORDER */
}

.svg-tab-stack .stack-frame { /* BORDER COLOR OF TAB GROUP */
    /* stroke: transparent; */
    /* stroke-width: 2px; */
}

#browser .tab-position.colored .tab:not(.active) {
    background-color: color-mix(in srgb, var(--colorBg), var(--lessTransparent));  /* BG COLOR OF TAB GROUP  */
    color: var(--colorFg);
}

#browser .tab-position.colored.accordion-toggle-arrow:hover,
#browser .tab-position.colored .tab:not(.active):hover {
    background-color: var(--colorBg);  /* BG COLOR OF HOVER TAB IN GROUP */ 
}

#browser .tab-position.colored.accordion-toggle-arrow,
#browser .tab-position.colored .tab.active {
    background-color: var(--colorBg);  /* BG COLOR OF ACTIVE TAB IN GROUP */ 
}

#browser .tab-position.colored.accordion-toggle-arrow { /* ARROW SETTINGS */
    background-color: color-mix(in srgb, var(--colorBg), var(--lessTransparent));
    color: var(--colorFg);
}

#browser .tab-position.colored .tab:not(.marked) + svg .stack-frame {
    stroke: transparent; /* BORDER COLOR OF TAB GROUP */
}

#browser .tab-position.colored .stack-counter {
    background-color: var(--colorHighlightBg); /* BG COLOR OF TAB GROUP NUMBER */
}

.tabs-left #tabs-container .toolbar-tabbar-after,
.tabs-right #tabs-container .toolbar-tabbar-after {
    margin-top: 13px; /* ADJUSTING NEW TAB ICON */
    margin-bottom: 2px;
}

/* WORKSPACES */

.color-behind-tabs-on #tabs-tabbar-container .toolbar:not(.toolbar-small) > .button-toolbar,
.color-behind-tabs-on #tabs-tabbar-container .toolbar:not(.toolbar-small) > div > .button-toolbar,
.color-behind-tabs-on #tabs-tabbar-container .toolbar:not(.toolbar-small) > .button-toolbar:hover,
.color-behind-tabs-on #tabs-tabbar-container .toolbar:not(.toolbar-small) > div > .button-toolbar:hover {
    color: var(--colorFg);
    margin-top: 5px;
} /* ADJUSTING WORKSPACE BUTTON */

.tabs-left .button-toolbar.workspace-popup.tabbar-workspace-button,
.tabs-right .button-toolbar.workspace-popup.tabbar-workspace-button {
    background-color: transparent; /* BG OF WORKSPACE BUTTON */
}

#tabs-tabbar-container .toolbar:not(.toolbar-small) > .button-toolbar > button:active,
#tabs-tabbar-container .toolbar:not(.toolbar-small) > div > .button-toolbar > button:active,
#tabs-tabbar-container .toolbar:not(.toolbar-small) > .button-toolbar:not(.toolbar-spacer, .toolbar-spacer-flexible) > button:not([disabled]):hover,
#tabs-tabbar-container .toolbar:not(.toolbar-small) > div > .button-toolbar:not(.toolbar-spacer, .toolbar-spacer-flexible) > button:not([disabled]):hover {
    background-color: rgba(0, 255, 200, 0.08) !important;
    transform: scale(1.04);
    box-shadow: 0 0 12px rgba(0, 255, 200, 0.9); /* HOVER OF WORKSPACES */
}

.tabs-left #tabs-container:has(.tab-strip.overflow) .toolbar-tabbar-before,
.tabs-left #tabs-container:has(.tab-strip.overflow) .toolbar-tabbar-after,
.tabs-right #tabs-container:has(.tab-strip.overflow) .toolbar-tabbar-before,
.tabs-right #tabs-container:has(.tab-strip.overflow) .toolbar-tabbar-after {
    padding: 0px 0px 3px 3px; /* FIXING SPACE WHEN MANY TABS */
}

/* TAB TILES MODE */

#browser .tile:has(> .tiled.webpageview) {
    border: var(--mosaicPadding) solid transparent; /* FIXING TAB TILES PART 1 */
}

#browser:not(.inner, .narrow-tiling) #webpage-stack > .tiled.visible {
    box-shadow: inset 0 0 0 var(--n6) transparent; /* FIXING TAB TILES PART 2 */
}

.tiled.webpageview:not(.active) {
    box-shadow: none; /* FIXING TAB TILES PART 3 */
}

#browser:not(.inner, .narrow-tiling) #webpage-stack > .tiled.visible {
    padding: 0; /* FIXING TAB TILES PART 4 */
}

.hasfocus .webpageview.tiled.active {
    box-shadow: 0 0 0 2px var(--colorHighlightBg); /* CHANGING COLOR OF BORDER OF ACTIVE WHEN BROWSER IS FOCUSED */
}

.isblurred .webpageview.tiled.active {
    box-shadow: 0 0 0 2px var(--colorHighlightBg); /* CHANGING COLOR OF BORDER OF ACTIVE WHEN BROWSER ISNT FOCUSED */
}
